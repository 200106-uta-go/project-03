# kreate.CreateChart
```
kreate.CreateChart("myprofile.yaml")
```

CreateChart is a function that generates a values.yaml, Chart.yaml, yaml templates for use with helm, and already-templated yamls ready for deployment in a Kubernetes cluster. 

When this command is used, a charts folder will be added to your current working directory with the following structure.
```
.
└── charts
    └── example
        ├── Chart.yaml
        ├── deploy
        │   ├── deployment.yaml
        │   ├── ingress.yaml
        │   └── service.yaml
        ├── templates
        │   ├── deployment.yaml
        │   ├── ingress.yaml
        │   └── service.yaml
        └── values.yaml
```
The `charts` directory is where all charts generated using CreateChart will be located. Each folder underneath `charts`, will be a separate chart based on a unique kreate profile. If the program is run multiple times without editing the `name` value in `Chart.yaml`, the new deployment will overwrite any existing chart with the same name.

Within each unique chart folder, the `deploy` folder will hold already-templated .yaml files ready for deployment using [kubectl apply](https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#apply).

The `templates` folder will hold a copy of the templates stored in `/var/local/kreate` that are used to generate the templated yaml files in the `deploy` folder. These templates are for use with [Go text templating](https://golang.org/pkg/text/template/), and can be used directly with [Helm](https://v2.helm.sh/docs/) or expanded with more templated values.

# Unexported Functions

### `createValues(profile kreate.Profile)`
createValues creates a values.yaml based on a profile. The profiles for kreate are stored by default in `/etc/kreate`.

### `populateChart(valuesFile string, chartDir string)`
populateChart injects the values inside valuesFile into chart templates. This function calls `helm template` to generate the chart files using the values.yaml file.

### `createChartFile(profile kreate.Profile)`
createChartFile generates the required Chart.yaml metadata file to use with helm. The profile name is used as the Helm Chart name.

### `buildFileSystem(profile kreate.Profile)`
buildFileSystem creates a chart directory in the current directory populated with a chart folder based on the current profile name, and a templates folder to hold yaml template files. These folders will be empty until `populateChart` is run

### `fixFileSystem(profile Profile)`
fixFileSystem rearranges the directories generated by Helm in createChartFile to remove unnecessary folders.

### `copyDir(sourceDir string, targetDir string)`
copyDir copies the contents of sourceDir into targetDir. The sourceDir folder itself is not copied into targetDir, only the files inside. This function is used to copy the template files stored in `/var/local/kreate` into the `templates` folder created in `buildFileSystem`.
